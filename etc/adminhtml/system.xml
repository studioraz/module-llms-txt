<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <tab id="ai" translate="label" sortOrder="400">
            <label>AI</label>
        </tab>
        <section id="llmtxt" translate="label" type="text" sortOrder="100" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>LLM.txt</label>
            <tab>ai</tab>
            <resource>MageOS_LlmTxt::config</resource>
            <group id="general" translate="label" type="text" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>General Settings</label>
                <comment><![CDATA[
                    <p>LLM.txt is a standard for helping AI systems understand your store's content.</p>
                    <p>Learn more at <a href="https://llmstxt.org" target="_blank">llmstxt.org</a></p>
                ]]></comment>
                <field id="enabled" translate="label comment" type="select" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable LLM.txt</label>
                    <comment>When enabled, your store will serve an llms.txt file at /llms.txt</comment>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                </field>
                <field id="site_name" translate="label comment" type="text" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Site Name</label>
                    <comment>Leave empty to use store name. This appears as the H1 heading in llms.txt</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="site_description" translate="label comment" type="textarea" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Site Description</label>
                    <comment>A brief description of your store (appears as blockquote). Keep it concise.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="custom_content" translate="label comment" type="textarea" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Custom Markdown Content</label>
                    <comment><![CDATA[Add custom markdown content that will appear after the site description. You can use markdown formatting.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="cache_lifetime" translate="label comment" type="text" sortOrder="50" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Cache Lifetime (seconds)</label>
                    <comment>How long to cache the generated llms.txt content. Default: 86400 (24 hours)</comment>
                    <validate>validate-number validate-zero-or-greater</validate>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
            </group>
            <group id="ai_generation" translate="label" type="text" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AI-Powered Generation</label>
                <comment><![CDATA[
                    <p>Use AI to intelligently generate llms.txt content from your store data.</p>
                    <p><strong>Note:</strong> Requires OpenAI API key. Generation costs approximately $0.001 per request.</p>
                ]]></comment>
                <field id="openai_api_key" translate="label comment" type="obscure" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>OpenAI API Key</label>
                    <comment><![CDATA[Get your API key at <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a>]]></comment>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <depends>
                        <field id="*/*/enabled">1</field>
                    </depends>
                </field>
                <field id="openai_model" translate="label comment" type="select" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>AI Model</label>
                    <comment>GPT-4o Mini is recommended for speed and cost</comment>
                    <source_model>MageOS\LlmTxt\Model\Config\Source\OpenAiModel</source_model>
                    <depends>
                        <field id="*/*/enabled">1</field>
                    </depends>
                </field>
                <field id="generate_button" translate="label" type="button" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Generate Content</label>
                    <frontend_model>MageOS\LlmTxt\Block\Adminhtml\System\Config\GenerateButton</frontend_model>
                    <depends>
                        <field id="*/*/enabled">1</field>
                    </depends>
                </field>
            </group>
            <group id="content" translate="label" type="text" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>LLM.txt Content</label>
                <comment>Review and edit the AI-generated content or write your own</comment>
                <field id="generated_content" translate="label comment" type="textarea" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Generated Content</label>
                    <comment>This content will be served at /llms.txt. Edit as needed.</comment>
                    <frontend_class>llmtxt-content-editor</frontend_class>
                    <depends>
                        <field id="*/*/enabled">1</field>
                    </depends>
                </field>
                <field id="use_manual_content" translate="label comment" type="select" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Use Manual Content</label>
                    <comment>Override AI-generated content with your own custom content</comment>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <depends>
                        <field id="*/*/enabled">1</field>
                    </depends>
                </field>
                <field id="manual_content" translate="label comment" type="textarea" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Manual Content</label>
                    <comment>Write your own llms.txt content in markdown format</comment>
                    <depends>
                        <field id="use_manual_content">1</field>
                    </depends>
                </field>
            </group>
            <group id="info" translate="label" type="text" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Information</label>
                <comment><![CDATA[
                    <div style="padding: 10px; background: #f5f5f5; border-left: 3px solid #eb5202;">
                        <h3 style="margin-top:0;">What is LLM.txt?</h3>
                        <p>LLM.txt is a proposed standard for helping AI systems (like ChatGPT, Claude, etc.) understand your website better.</p>
                        <p>It's similar to robots.txt, but instead of blocking access, it <strong>guides AI</strong> to your most important content.</p>

                        <h4>Best Practices:</h4>
                        <ul>
                            <li>Keep total content under 2,000 tokens (~1,500 words)</li>
                            <li>Include your most important pages and products</li>
                            <li>Write clear, concise descriptions</li>
                            <li>Update when you add major content</li>
                        </ul>

                        <h4>View Your LLM.txt:</h4>
                        <p>After saving and flushing cache, visit: <code>https://yourdomain.com/llms.txt</code></p>

                        <p><a href="https://llmstxt.org" target="_blank">Learn more about the LLM.txt standard â†’</a></p>
                    </div>
                ]]></comment>
            </group>
        </section>
    </system>
</config>
